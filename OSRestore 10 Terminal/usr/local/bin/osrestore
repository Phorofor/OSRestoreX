#!/bin/bash

echo "THIS PACKAGE WILL ASSIST IN ERASING YOUR DEVICE, YOU AGREE TO USE THIS AT YOUR OWN RISK. THANKS FOR THE METHOD /u/changemylife99."
echo "Thanks to contributions from ipadkid358 and thebeastgamer25"
tput bold
echo "If you would like to quit, close Terminals NOW! I have purpousefully added a 10 second hang time for you to exit if needed. Use this time wisley."
tput sgr0
sleep 10

apt-get update

echo "Installing MTerminal."
apt-get install com.officialscheduler.mterminal
echo "Done! Moving on to the actual erase!"


echo "THIS IS YOUR LAST CHANCE TO CLOSE CYDIA WITH NO ERASING DONE. YOU HAVE 5 SECONDS."
sleep 5

echo "Starting erase..."
rm /.installed_yaluX
echo "Removed Yalu file."

cd /var/mobile/

echo "Removing /var/mobile and it's contents..."
rm -R Backups
rm -R Containers
rm -R Documents
rm -R Downloads
rm -R Media
rm -R MobileSoftwareUpdate
echo "Removed all contents except for Library from /var/mobile."

echo "Removing the contents of /var/mobile/Library except for carrier settings and important files..."
echo "This step could take the longest."

cd /var/mobile/Library/

echo "Moved to /var/mobile/Library. Final erase starting."

rm -R Accessibility
rm -R Accounts
rm -R AddressBook
rm -R AggregateDictionary
rm -R ApplePushService
rm -R Application Support
rm -R Assistant
rm -R BackBoard
rm -R BullitenBoard
rm -R Caches
rm -R Calender
rm -R CallDirectory
rm -R CallHistoryDB
rm -R CallHistoryTransactions
rm -R CallServices
rm -R ColorFlow 3
rm -R com.apple.internal.ck
rm -R com.apple.iTunesStore
rm -R com.apple.itunesstored
rm -R com.apple.nsurlsessionid
rm -R Cookies
rm -R CoreDuet
rm -R CoreFollowUp
rm -R CrashReporter
rm -R Cydia
rm -R DataAccess
rm -R DeviceRegistry.state
rm -R DifferentialPrivacy
rm -R DuetActivityScheudler
rm -R DuetExpertCenter
rm -R ExternalAccessory
rm -R FairPlay
rm -R FileProvider
rm -R FlurryFiles
rm -R FrontBoard
rm -R GameKit
rm -R GeoServices
rm -R Health
rm -R homed
rm -R iCleaner
rm -R IdentityServices
rm -R Inboxes
rm -R Keyboard
rm -R KeyboardServices
rm -R LASD
rm -R locationd
rm -R LockHTML
rm -R Logs
rm -R mad
rm -R Mail
rm -R MediaStream
rm -R Mobile Documents
rm -R MusicLibrary
rm -R NanoTimeKit
rm -R News
rm -R Notes
rm -R OnDemandResources
rm -R OTALogging
rm -R Passes
rm -R PickPocket
rm -R Reflectrix
rm -R ReplayKit
rm -R ResponseKit
rm -R Safari
rm -R Saved Application State
rm -R SMS
rm -R SoftwareUpdate
rm -R Spotlight
rm -R SpringBoard
rm -R Stats
rm -R Suggestions
rm -R SyncedPreferences
rm -R TCC
rm -R UserConfigurationProfiles
rm -R Voicemail
rm -R VoiceServices
rm -R VoiceTrigger
rm -R WatchConnectivity
rm -R WebClips
rm -R WebKit
rm -R WelcomeMat
rm -R Springtomize
rm -R Boxy
rm -R AppCake

echo "Removing stashed tweaks..."
cd /var/db/
rm -R stash

echo "Done removing stashed tweaks. Removing Cydia Substrate..."
echo "This should have dpkg remove all leftover tweak files and such."
apt-get --yes remove mobilesubstrate
echo "Removed mobilesubstrate. DO NOT RESPRING, I REPEAT, DO NOT RESPRING. YOU HAVE BEEN WARNED."
sleep 5

echo "Removing any other temporary files caused by Cydia and other tweaks."
rm /tmp/cydia.log
rm /tmp/flush.log
rm -R /Library/Themes
echo "Just removed Cydia log. More could be added soon over time, but this shouldnt matter to much."

tput bold
echo "PLEASE GO TO SETTINGS IMMEDIATLEY AND USE ERASE ALL CONTENTS AND SETTINGS! THIS TWEAK ONLY DOES HALF OF THE WORK NEEDED. PLEASE DO THIS!"
tput sgr0